(function(d){"object"===typeof module&&"object"===typeof module.exports?module.exports=d(require("jquery")):jQuery?d(jQuery):console.error("no jQuery found!")})(function(d){function p(a){this.typeOf="SOAPEnvelope";this.prefix="soap";this.soapConfig=null;this.attributes={};this.headers=[];this.bodies=[];var b=a.name.split(":");if("Envelope"===b[1]||"Body"===b[1]){this.prefix=b[0];a.attr("xmlns:"+this.prefix)===f.SOAP11.namespaceURL&&(this.soapConfig=this.SOAP11);a.attr("xmlns:"+this.prefix)===f.SOAP12.namespaceURL&&
(this.soapConfig=this.SOAP12);if((b=a.find(this.prefix+":Envelope"))&&b.attributes)for(var c in b.attributes)this.addAttribute(c,b.attributes[c]);if((header=a.find(this.prefix+":Header"))&&header.children)for(c=0;c<header.children.length;c++)this.addHeader(header.children[c]);if((body=a.find(this.prefix+":Body"))&&body.children)for(a=0;a<body.children.length;a++)this.addBody(body.children[a]);else for(c=0;c<a.children.length;c++)this.addBody(a.children[c])}else this.addBody(a)}function k(){m&&"object"===
typeof console&&d.isFunction(console.log)&&(1==arguments.length?console.log(arguments[0]):console.log(arguments))}function n(){"object"===typeof console&&d.isFunction(console.warn)&&(1==arguments.length?console.warn(arguments[0]):console.warn(arguments))}var m,l={appendMethodToURL:!0,async:!0,enableLogging:!1,noPrefix:!1,soap12:!1};p.prototype={addAttribute:function(a,b){this.attributes[a]=b},addNamespace:function(a,b){this.addAttribute("xmlns:"+a,b)},addHeader:function(a){this.headers.push(a)},addBody:function(a){this.bodies.push(a)},
toString:function(){var a=new h(this.prefix+":Envelope"),b;for(b in this.attributes)a.attr(b,this.attributes[b]);if(0<this.headers.length){b=a.newChild(this.prefix+":Header");for(var c=0;c<this.headers.length;c++)b.appendChild(this.headers[c])}if(0<this.bodies.length)for(b=a.newChild(this.prefix+":Body"),c=0;c<this.bodies.length;c++)b.appendChild(this.bodies[c]);a.attr("xmlns:"+this.prefix)||a.addNamespace(this.prefix,this.soapConfig.namespaceURL);a.attr("xmlns:xsi")||a.addNamespace("xsi","http://www.w3.org/2001/XMLSchema-instance");
a.attr("xmlns:xsd")||a.addNamespace("xsd","http://www.w3.org/2001/XMLSchema");return'<?xml version="1.0" encoding="UTF-8"?>'+a.toString()},send:function(a){var b=this;this.soapConfig||(this.soapConfig=a.soap12?f.SOAP12:f.SOAP11);var c=this.soapConfig.type;c===f.SOAP11.type&&a.action&&(a.headers.SOAPAction=a.action);k("jquery.soap - beforeSend:",this.toString());return d.ajax({type:"POST",context:a.context,statusCode:a.statusCode,url:a.url,async:a.async,headers:a.headers,dataType:"xml",processData:!1,
data:this.toString(),contentType:c+"; charset=UTF-8",xhrFields:{withCredentials:!0},beforeSend:function(){if(d.isFunction(a.beforeSend))return a.beforeSend.call(a.context,b)}})}};var h=function(a){this.typeOf="SOAPObject";this.name=a;this.ns={};this.attributes={};this._parent=null;this.children=[];this.value=void 0};h.prototype={attr:function(a,b){return a&&b||a&&""===b?(this.attributes[a]=b,this):a?this.attributes[a]:this.attributes},val:function(a){if(void 0===a)return"true"===this.attr("xsi:nil")?
null:this.value;null===a?this.attr("xsi:nil","true"):this.value=a;return this},addNamespace:function(a,b){this.ns[a]=b;return this},appendChild:function(a){a._parent=this;this.children.push(a);return a},newChild:function(a){a=new h(a);this.appendChild(a);return a},addParameter:function(a,b){var c=new h(a);c.val(b);this.appendChild(c);return this},hasChildren:function(){return 0<this.children.length?!0:!1},find:function(a){if(this.name===a)return this;for(var b=0;b<this.children.length;b++){var c=
this.children[b].find(a);if(c)return c}},end:function(){return this.parent()},parent:function(){return this._parent},toString:function(){var a=[],b={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"},c;a.push("<"+this.name);for(var g in this.ns)a.push(" xmlns:"+g+'="'+this.ns[g]+'"');for(var e in this.attributes)"string"===typeof this.attributes[e]&&a.push(" "+e+'="'+this.attributes[e]+'"');a.push(">");if(this.hasChildren())for(var d in this.children)g=this.children[d],"object"===typeof g&&
"SOAPObject"===g.typeOf&&a.push(g.toString());void 0!==this.value&&("string"===typeof this.value?c=this.value.match(/<!\[CDATA\[\s\S\]*\]>/)?this.value:this.value.replace(/[<>&"']/g,function(a){return b[a]}):"number"===typeof this.value&&(c=this.value.toString()),a.push(c));a.push("</"+this.name+">");return a.join("")}};var q=function(a,b){this.typeOf="SOAPResponse";this.status=a;this.headers=b.getAllResponseHeaders().split("\n");this.httpCode=b.status;this.httpText=b.statusText;this.content=void 0===
b.responseXML?b.responseText:b.responseXML;this.toString=function(){if("string"===typeof this.content)return this.content;if(d.isXMLDoc(this.content))return f.dom2string(this.content);throw Error("Unexpected Content: "+d.type(this.content));};this.toXML=function(){return d.isXMLDoc(this.content)?this.content:d.parseXML(this.content)};this.toJSON=function(){if(d.xml2json)return d.xml2json(this.content);n("jQuery.soap - Missing JQuery Plugin 'xml2json', info at: https://github.com/doedje/jquery.soap#dependencies")}},
f={SOAP11:{type:"text/xml",namespaceURL:"http://schemas.xmlsoap.org/soap/envelope/"},SOAP12:{type:"application/soap+xml",namespaceURL:"http://www.w3.org/2003/05/soap-envelope"},processData:function(a){var b;"string"===d.type(a.data)&&/\S/.test(a.data)&&(a.data=d.parseXML(a.data));d.isXMLDoc(a.data)?b=f.dom2soap(a.data.firstChild):d.isArray(a.data)?b=f.array2soap(a):d.isPlainObject(a.data)?b=f.json2soap(a.name,a.data,a.prefix):d.isFunction(a.data)&&(b=a.data.call(a.context,h));return b},json2soap:function(a,
b,c,g){var e,d;if(null===b)e=new h(c+a),e.attr("xsi:nil","true");else if("object"==typeof b)if(-1<b.constructor.toString().indexOf("Array"))for(var f=0;f<b.length;f++)d=this.json2soap(a,b[f],c,g),g.appendChild(d);else if(-1<b.constructor.toString().indexOf("String"))e=new h(c+a),e.val(b);else if(-1<b.constructor.toString().indexOf("Date"))e=new h(c+a),e.val(b.toISOString());else for(f in e=new h(c+a),b)(d=this.json2soap(f,b[f],c,e))&&e.appendChild(d);else"boolean"==typeof b?(e=new h(c+a),e.val(b?
"true":"false")):(e=new h(c+a),e.val(b));return e},dom2soap:function(a){for(var b=/^\s+$/,c=new h(a.nodeName),d=0;d<a.attributes.length;d++){var e=a.attributes[d];c.attr(e.name,e.value)}for(d=0;d<a.childNodes.length;d++){e=a.childNodes[d];if(1===e.nodeType){var r=f.dom2soap(e);c.appendChild(r)}3!==e.nodeType||b.test(e.nodeValue)||c.val(e.nodeValue);4===e.nodeType&&c.val("<![CDATA["+e.nodeValue+"]]\x3e")}return c},array2soap:function(a){soapObject=new h(a.name);for(var b=0;b<a.data.length;b++)if(d.isArray(a.data[b])){var c=
soapObject.newChild("soapenc:Array");c.attr("soapenc:arrayType","xsd:string["+a.data[b].length+"]");for(var g=0;g<a.data[b].length;g++)c.newChild("item").attr("type","xsd:string").val(a.data[b][g]).end()}else soapObject.newChild("c-gensym"+b).attr("type","xsd:string").val(a.data[b]).end();return soapObject},dom2string:function(a){return"undefined"!==typeof XMLSerializer?(new window.XMLSerializer).serializeToString(a):a.xml},createWSS:function(a){if(a.username&&a.password){var b=(new h("wsse:Security")).addNamespace("wsse",
"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd").addNamespace("wsu","http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd").newChild("wsse:UsernameToken").newChild("wsse:Username").attr("Type","http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd").val(a.username).end().newChild("wsse:Password").attr("Type","http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText").val(a.password).end().end(),
c=b.find("wsse:UsernameToken");a.nonce&&c.newChild("wsse:Nonce").attr("Type","http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd").val(a.nonce);a.created&&c.newChild("wsu:Created").attr("Type","http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd").val(a.created);return b}},fallbackDeprecated:function(a){var b={namespaceUrl:"namespaceURL",request:"beforeSend",params:"data"},c;for(c in b){var d=b[c];!a[d]&&a[c]&&(n("jquery.soap: "+c+" is deprecated, use "+
d+" instead!"),a[d]=a[c],delete a[c])}}};return d.soap=function(a){var b={};if(a&&!a.params&&!a.data)return d.extend(l,a),m=a.enableLogging,k("jQuery.soap - globalConfig updated:",l),l;d.extend(b,l,a);m=b.enableLogging;k("jquery.soap - config:",b);f.fallbackDeprecated(b);a=f.processData({data:b.data,name:b.elementName?b.elementName:b.method,context:b.context,prefix:b.namespaceQualifier&&!b.noPrefix?b.namespaceQualifier+":":""});b.namespaceQualifier&&b.namespaceURL?a.addNamespace(b.namespaceQualifier,
b.namespaceURL):b.namespaceURL&&a.attr("xmlns",b.namespaceURL);if(a&&b.url){var c=new p(a);if(b.envAttributes)for(var g in b.envAttributes)c.addAttribute(g,b.envAttributes[g]);if(b.SOAPHeader&&(g=f.processData({data:b.SOAPHeader,name:"temp",prefix:""})))if(g.hasChildren())for(var e in g.children)c.addHeader(g.children[e]);else c.addHeader(g);b.wss&&(e=f.createWSS(b.wss))&&c.addHeader(e);b.appendMethodToURL&&b.method&&(b.url+=b.method);return c.send({url:b.url,context:b.context,async:b.async,headers:b.HTTPHeaders?
b.HTTPHeaders:{},action:b.SOAPAction?b.SOAPAction:b.method,soap12:b.soap12,beforeSend:b.beforeSend,statusCode:b.statusCode}).done(function(a,c,e){a=new q(c,e);k("jquery.soap - receive:",a.toString());d.isFunction(b.success)&&b.success.call(this,a)}).fail(function(a,c,e){k("jquery.soap - error:",e);d.isFunction(b.error)&&b.error.call(this,new q(c,a))})}e=new d.Deferred;a||(c="jquery.soap - no soapObject");b.url||(c="jquery.soap - no url");c&&(n(c),e.reject(c));return e.promise()}});