!function(e){"object"==typeof module&&"object"==typeof module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){function t(e){var t={};if(e&&!e.params&&!e.data)return i.extend(o,e),r=e.enableLogging,n("jQuery.soap - globalConfig updated:",o),o;i.extend(t,o,e),r=t.enableLogging,n("jquery.soap - config:",t),p.fallbackDeprecated(t);var d=p.processData({data:t.data,name:t.elementName?t.elementName:t.method,context:t.context,prefix:t.namespaceQualifier&&!t.noPrefix?t.namespaceQualifier+":":""});if(t.namespaceQualifier&&t.namespaceURL?d.addNamespace(t.namespaceQualifier,t.namespaceURL):t.namespaceURL&&d.attr("xmlns",t.namespaceURL),d&&t.url){var u=new s(d);if(t.envAttributes)for(var c in t.envAttributes)u.addAttribute(c,t.envAttributes[c]);if(t.SOAPHeader){var l=p.processData({data:t.SOAPHeader,name:"temp",prefix:""});if(l)if(l.hasChildren())for(var f in l.children)u.addHeader(l.children[f]);else u.addHeader(l)}if(t.wss){var m=p.createWSS(t.wss);m&&u.addHeader(m)}return t.appendMethodToURL&&t.method&&(t.url+=t.method),u.send({url:t.url,context:t.context,async:t.async,headers:t.HTTPHeaders?t.HTTPHeaders:{},action:t.SOAPAction?t.SOAPAction:t.method,soap12:t.soap12,beforeSend:t.beforeSend,statusCode:t.statusCode}).done(function(e,s,a){var r=new h(s,a);n("jquery.soap - receive:",r.toString()),i.isFunction(t.success)&&t.success.call(this,r)}).fail(function(e,s,a){n("jquery.soap - error:",a),i.isFunction(t.error)&&t.error.call(this,new h(s,e))})}var y,v=new i.Deferred;return d||(y="jquery.soap - no soapObject"),t.url||(y="jquery.soap - no url"),y&&(a(y),v.reject(y)),v.promise()}function s(e){this.typeOf="SOAPEnvelope",this.prefix="soap",this.soapConfig=null,this.attributes={},this.headers=[],this.bodies=[];var t=e.name.split(":");if("Envelope"===t[1]||"Body"===t[1]){this.prefix=t[0],e.attr("xmlns:"+this.prefix)===p.SOAP11.namespaceURL&&(this.soapConfig=this.SOAP11),e.attr("xmlns:"+this.prefix)===p.SOAP12.namespaceURL&&(this.soapConfig=this.SOAP12);var s=e.find(this.prefix+":Envelope");if(s&&s.attributes)for(var n in s.attributes)this.addAttribute(n,s.attributes[n]);if(header=e.find(this.prefix+":Header"),header&&header.children)for(var a=0;a<header.children.length;a++)this.addHeader(header.children[a]);if(body=e.find(this.prefix+":Body"),body&&body.children)for(var r=0;r<body.children.length;r++)this.addBody(body.children[r]);else for(var i=0;i<e.children.length;i++)this.addBody(e.children[i])}else this.addBody(e)}function n(){r&&"object"==typeof console&&i.isFunction(console.log)&&(1==arguments.length?console.log(arguments[0]):console.log(arguments))}function a(){"object"==typeof console&&i.isFunction(console.warn)&&(1==arguments.length?console.warn(arguments[0]):console.warn(arguments))}var r,i=e,o={appendMethodToURL:!0,async:!0,enableLogging:!1,noPrefix:!1,soap12:!1};s.prototype={addAttribute:function(e,t){this.attributes[e]=t},addNamespace:function(e,t){this.addAttribute("xmlns:"+e,t)},addHeader:function(e){this.headers.push(e)},addBody:function(e){this.bodies.push(e)},toString:function(){var e=new d(this.prefix+":Envelope");for(var t in this.attributes)e.attr(t,this.attributes[t]);if(this.headers.length>0)for(var s=e.newChild(this.prefix+":Header"),n=0;n<this.headers.length;n++)s.appendChild(this.headers[n]);if(this.bodies.length>0)for(var a=e.newChild(this.prefix+":Body"),r=0;r<this.bodies.length;r++)a.appendChild(this.bodies[r]);return e.attr("xmlns:"+this.prefix)||e.addNamespace(this.prefix,this.soapConfig.namespaceURL),e.attr("xmlns:xsi")||e.addNamespace("xsi","http://www.w3.org/2001/XMLSchema-instance"),e.attr("xmlns:xsd")||e.addNamespace("xsd","http://www.w3.org/2001/XMLSchema"),'<?xml version="1.0" encoding="UTF-8"?>'+e.toString()},send:function(e){var t=this;this.soapConfig||(this.soapConfig=e.soap12?p.SOAP12:p.SOAP11);var s=this.soapConfig.type;return s===p.SOAP11.type&&e.action&&(e.headers.SOAPAction=e.action),n("jquery.soap - beforeSend:",this.toString()),i.ajax({type:"POST",context:e.context,statusCode:e.statusCode,url:e.url,async:e.async,headers:e.headers,dataType:"xml",processData:!1,data:this.toString(),contentType:s+"; charset=UTF-8",beforeSend:function(){return i.isFunction(e.beforeSend)?e.beforeSend.call(e.context,t):void 0}})}};var d=function(e){this.typeOf="SOAPObject",this.name=e,this.ns={},this.attributes={},this._parent=null,this.children=[],this.value=void 0};d.prototype={attr:function(e,t){return e&&t||e&&""===t?(this.attributes[e]=t,this):e?this.attributes[e]:this.attributes},val:function(e){return void 0===e?"true"===this.attr("xsi:nil")?null:this.value:null===e?(this.attr("xsi:nil","true"),this):(this.value=e,this)},addNamespace:function(e,t){return this.ns[e]=t,this},appendChild:function(e){return e._parent=this,this.children.push(e),e},newChild:function(e){var t=new d(e);return this.appendChild(t),t},addParameter:function(e,t){var s=new d(e);return s.val(t),this.appendChild(s),this},hasChildren:function(){return this.children.length>0?!0:!1},find:function(e){if(this.name===e)return this;for(var t=0;t<this.children.length;t++){var s=this.children[t].find(e);if(s)return s}},end:function(){return this.parent()},parent:function(){return this._parent},toString:function(){var e,t=[],s={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"};t.push("<"+this.name);for(var n in this.ns)t.push(" xmlns:"+n+'="'+this.ns[n]+'"');for(var a in this.attributes)"string"==typeof this.attributes[a]&&t.push(" "+a+'="'+this.attributes[a]+'"');if(t.push(">"),this.hasChildren())for(var r in this.children){var i=this.children[r];"object"==typeof i&&"SOAPObject"===i.typeOf&&t.push(i.toString())}return void 0!==this.value&&("string"==typeof this.value?e=this.value.match(/<!\[CDATA\[\s\S\]*\]>/)?this.value:this.value.replace(/[<>&"']/g,function(e){return s[e]}):"number"==typeof this.value&&(e=this.value.toString()),t.push(e)),t.push("</"+this.name+">"),t.join("")}};var h=function(e,t){this.typeOf="SOAPResponse",this.status=e,this.headers=t.getAllResponseHeaders().split("\n"),this.httpCode=t.status,this.httpText=t.statusText,this.content=void 0===t.responseXML?t.responseText:t.responseXML,this.toString=function(){if("string"==typeof this.content)return this.content;if(i.isXMLDoc(this.content))return p.dom2string(this.content);throw new Error("Unexpected Content: "+i.type(this.content))},this.toXML=function(){return i.isXMLDoc(this.content)?this.content:i.parseXML(this.content)},this.toJSON=function(){return i.xml2json?i.xml2json(this.content):void a("jQuery.soap - Missing JQuery Plugin 'xml2json', info at: https://github.com/doedje/jquery.soap#dependencies")}},p={SOAP11:{type:"text/xml",namespaceURL:"http://schemas.xmlsoap.org/soap/envelope/"},SOAP12:{type:"application/soap+xml",namespaceURL:"http://www.w3.org/2003/05/soap-envelope"},processData:function(e){var t;return"string"===i.type(e.data)&&/\S/.test(e.data)&&(e.data=i.parseXML(e.data)),i.isXMLDoc(e.data)?t=p.dom2soap(e.data.firstChild):i.isArray(e.data)?t=p.array2soap(e):i.isPlainObject(e.data)?t=p.json2soap(e.name,e.data,e.prefix):i.isFunction(e.data)&&(t=e.data.call(e.context,d)),t},json2soap:function(e,t,s,n){var a,r;if(null===t)a=new d(s+e),a.attr("xsi:nil","true");else if("object"==typeof t)if(t.constructor.toString().indexOf("Array")>-1)for(var i=0;i<t.length;i++)r=this.json2soap(e,t[i],s,n),n.appendChild(r);else if(t.constructor.toString().indexOf("String")>-1)a=new d(s+e),a.val(t);else if(t.constructor.toString().indexOf("Date")>-1)a=new d(s+e),a.val(t.toISOString());else{a=new d(s+e);for(var o in t)r=this.json2soap(o,t[o],s,a),r&&a.appendChild(r)}else"boolean"==typeof t?(a=new d(s+e),a.val(t?"true":"false")):(a=new d(s+e),a.val(t));return a},dom2soap:function(e){for(var t=/^\s+$/,s=new d(e.nodeName),n=0;n<e.attributes.length;n++){var a=e.attributes[n];s.attr(a.name,a.value)}for(var r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];if(1===i.nodeType){var o=p.dom2soap(i);s.appendChild(o)}3!==i.nodeType||t.test(i.nodeValue)||s.val(i.nodeValue),4===i.nodeType&&s.val("<![CDATA["+i.nodeValue+"]]>")}return s},array2soap:function(e){soapObject=new d(e.name);for(var t=0;t<e.data.length;t++)if(i.isArray(e.data[t])){var s=soapObject.newChild("soapenc:Array");s.attr("soapenc:arrayType","xsd:string["+e.data[t].length+"]");for(var n=0;n<e.data[t].length;n++)s.newChild("item").attr("type","xsd:string").val(e.data[t][n]).end()}else soapObject.newChild("c-gensym"+t).attr("type","xsd:string").val(e.data[t]).end();return soapObject},dom2string:function(e){return"undefined"!=typeof XMLSerializer?(new window.XMLSerializer).serializeToString(e):e.xml},createWSS:function(e){if(e.username&&e.password){var t={security:"wsse:Security",securityNS:"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd",usernameToken:"wsse:UsernameToken",usernameTokenNS:"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd",username:"wsse:Username",usernameType:"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd",password:"wsse:Password",passwordType:"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText",nonce:"wsse:Nonce",nonceType:"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd",wsuCreated:"wsu:Created",wsuCreatedType:"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"},s=new d(t.security).addNamespace("wsse",t.securityNS).addNamespace("wsu",t.usernameTokenNS).newChild(t.usernameToken).newChild(t.username).attr("Type",t.usernameType).val(e.username).end().newChild(t.password).attr("Type",t.passwordType).val(e.password).end().end(),n=s.find(t.usernameToken);return e.nonce&&n.newChild(t.nonce).attr("Type",t.nonceType).val(e.nonce),e.created&&n.newChild(t.wsuCreated).attr("Type",t.wsuCreatedType).val(e.created),s}},fallbackDeprecated:function(e){var t={namespaceUrl:"namespaceURL",request:"beforeSend",params:"data"};for(var s in t){var n=t[s];!e[n]&&e[s]&&(a("jquery.soap: "+s+" is deprecated, use "+n+" instead!"),e[n]=e[s],delete e[s])}}};return i.soap=t});